<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="utf-8" />
    <title>Contact Anvi Studio</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- CRITICAL FIX: Add Bootstrap and FontAwesome links -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@300;400&display=swap" rel="stylesheet">

    <style>
        :root{
            --brand:#ff7c04;
            --dark:#222;
            --muted:#6c757d;
        }
        body { font-family: 'Roboto', sans-serif; color: #222; }
        .main-nav{ background:#000; color:#fff; }

        /* *** FIX: Ensure active links are always clearly visible *** */
        .main-nav .nav-link{ color:#fff; }
        .main-nav .nav-link:hover,
        .main-nav .nav-link.active {
            color: var(--brand); /* Active/Hover color */
            font-weight: 700;    /* Make active link bold */
            border-bottom: 2px solid var(--brand); /* Subtle underline for clarity */
            padding-bottom: 4px;
        }
        /* *** END FIX *** */

        .hero-title { font-family: 'Playfair Display', serif; font-weight: 700; color: #000; }
        .contact-card { border-radius: 12px; }
        .contact-info-block { background-color: var(--brand); color: white; padding: 30px; border-radius: 12px; }
        .btn-brand { background-color: var(--brand); border-color: var(--brand); color: white; }
        .btn-brand:hover { background-color: #cc6300; border-color: #cc6300; }
        /* FIX FOR ICON ALIGNMENT */
        .navbar-nav { align-items: center; }
    </style>
</head>
<body>

<!-- Offer bar (for consistency) -->
<div class="offer-bar text-center" style="background: linear-gradient(90deg,#111, #222); color:#fff; padding:6px 0;">
    <div class="container">Free Shipping on Orders Above ₹1999 – Use code <a href="#" style="color:var(--brand); text-decoration:none; font-weight:600;">FREESHIP</a></div>
</div>

<!-- NAVBAR - FIXED VERSION -->
<nav class="navbar navbar-expand-lg main-nav">
    <div class="container">
        <a class="navbar-brand d-flex align-items-center" href="/">
            <img th:src="@{/images/Chaknik_Logo.png}" alt="Anvi Studio Logo" style="height:75px; margin-right:4px;">
            <span class="text-white">Anvi Studio</span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav" aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="mainNav">
            <!-- MAIN LINKS -->
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
                <!-- *** NEW ARRIVALS TAB *** -->
                <li class="nav-item"><a class="nav-link" th:href="@{/products(sort='newest')}">New Arrivals</a></li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="shopDropdown" role="button" data-bs-toggle="dropdown">Shop</a>
                    <ul class="dropdown-menu" aria-labelledby="shopDropdown">
                        <!-- START: EXPANDED CATEGORY LIST -->
                        <li><a class="dropdown-item" th:href="@{/products(category='Long Frocks')}">Long Frocks</a></li>
                        <li><a class="dropdown-item" th:href="@{/products(category='Lehengas')}">Lehengas</a></li>
                        <li><a class="dropdown-item" th:href="@{/products(category='Mom & Me')}">Mom & Me</a></li>
                        <li><a class="dropdown-item" th:href="@{/products(category='Crop Top – Skirts')}">Crop Top – Skirts</a></li>
                        <li><a class="dropdown-item" th:href="@{/products(category='Handlooms')}">Handlooms</a></li>
                        <li><a class="dropdown-item" th:href="@{/products(category='Casual Frocks')}">Casual Frocks</a></li>
                        <li><a class="dropdown-item" th:href="@{/products(category='Ready To Wear')}">Ready To Wear</a></li>
                        <li><a class="dropdown-item" th:href="@{/products(category='Dupattas')}">Dupattas</a></li>
                        <li><a class="dropdown-item" th:href="@{/products(category='Kids wear')}">Kids wear</a></li>
                        <li><a class="dropdown-item" th:href="@{/products(category='Dress Material')}">Dress Material</a></li>
                        <li><a class="dropdown-item" th:href="@{/products(category='Sarees')}">Sarees</a></li>
                        <li><a class="dropdown-item" th:href="@{/products(category='Blouses')}">Blouses</a></li>
                        <li><a class="dropdown-item" th:href="@{/products(category='Fabrics')}">Fabrics</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <!-- END: EXPANDED CATEGORY LIST -->
                        <li><a class="dropdown-item" th:href="@{/products}">All Products</a></li>
                    </ul>
                </li>
                <li class="nav-item"><a class="nav-link" href="/about">About</a></li>
                <!-- CONTACT - ACTIVE ON CONTACT.HTML -->
                <li class="nav-item"><a class="nav-link active" aria-current="page" href="/contact">Contact</a></li>
            </ul>

            <!-- NAVIGATION ICONS (Pushed to the far right) - SINGLE SET ONLY -->
            <ul class="navbar-nav  mb-2 mb-lg-0">

                <!-- 1. LOGIN/PROFILE ICON -->
                <li class="nav-item">
                    <a class="nav-link" th:href="@{/login}" sec:authorize="!isAuthenticated()">
                        <i class="fa fa-user"></i>
                    </a>
                </li>

                <!-- USER NAME - Only when authenticated -->
                <li class="nav-item" sec:authorize="isAuthenticated()">
                    <span class="nav-link text-white"><i class="fa fa-user me-1"></i><span sec:authentication="name">User</span></span>
                </li>

                <!-- 2. WISHLIST ICON -->
                <li class="nav-item">
                    <a class="nav-link" th:href="@{/wishlist-unauth}" sec:authorize="!isAuthenticated()"><i class="fa-regular fa-heart"></i></a>
                    <a class="nav-link" th:href="@{/wishlist}" sec:authorize="isAuthenticated()"><i class="fa-regular fa-heart"></i></a>
                </li>

                <!-- 3. CART ICON -->
                <li class="nav-item">
                    <a class="nav-link" th:href="@{/cart-unauth}" sec:authorize="!isAuthenticated()"><i class="fa fa-shopping-cart"></i></a>
                    <a class="nav-link" th:href="@{/cart}" sec:authorize="isAuthenticated()"><i class="fa fa-shopping-cart"></i></a>
                </li>

                <!-- LOGOUT BUTTON - Only when authenticated -->
                <li class="nav-item" sec:authorize="isAuthenticated()">
                    <form th:action="@{/logout}" method="post" class="d-inline">
                        <button type="submit" class="btn btn-danger btn-sm">Logout</button>
                    </form>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- CONTACT SECTION -->
<section class="py-5">
    <div class="container">
        <h1 class="hero-title display-5 mb-4 text-center">Get In Touch</h1>

        <!-- Flash Messages (set by RedirectAttributes in HomeController) -->
        <div th:if="${successMessage}" class="alert alert-success alert-dismissible fade show" role="alert">
            <span th:text="${successMessage}"></span>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        <div th:if="${errorMessage}" class="alert alert-danger alert-dismissible fade show" role="alert">
            <span th:text="${errorMessage}"></span>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>

        <div class="row g-4 mt-4">

            <!-- Contact Form -->
            <div class="col-lg-7">
                <div class="card contact-card shadow p-4 h-100">
                    <h4 class="mb-4">Send Us a Message</h4>
                    <!-- Form posts to /contact, binding to the empty ContactMessage object -->
                    <form th:action="@{/contact}" th:object="${contactMessage}" method="post">

                        <div class="mb-3">
                            <label for="name" class="form-label">Your Name</label>
                            <input type="text" th:field="*{name}" class="form-control" id="name" required>
                        </div>

                        <div class="mb-3">
                            <label for="email" class="form-label">Email Address</label>
                            <input type="email" th:field="*{email}" class="form-control" id="email" required>
                        </div>

                        <div class="mb-3">
                            <label for="phoneNumber" class="form-label">Phone Number (Optional)</label>
                            <input type="tel" th:field="*{phoneNumber}" class="form-control" id="phoneNumber">
                        </div>

                        <div class="mb-3">
                            <label for="message" class="form-label">Message/Query</label>
                            <textarea th:field="*{message}" class="form-control" id="message" rows="5" required></textarea>
                        </div>

                        <button type="submit" class="btn btn-brand w-100 mt-3">
                            <i class="fa fa-paper-plane me-2"></i> Submit Message
                        </button>
                    </form>
                </div>
            </div>

            <!-- Contact Info -->
            <div class="col-lg-5">
                <div class="contact-info-block h-100 shadow-sm">
                    <h4 class="mb-4">Contact Information</h4>
                    <p class="mb-4">We are available during business hours to assist you with any questions about orders, products, or customization requests.</p>

                    <div class="d-flex align-items-center mb-3">
                        <i class="fas fa-map-marker-alt fa-lg me-3"></i>
                        <div>
                            <p class="mb-0 fw-bold">Studio Address:</p>
                            <p class="mb-0 small">Plot No : 68, Cross 2, 1st Floor, Municipal Employees Colony, Siddartha Nagar, Vijayawada - 520010</p>
                        </div>
                    </div>

                    <div class="d-flex align-items-center mb-3">
                        <i class="fas fa-envelope fa-lg me-3"></i>
                        <div>
                            <p class="mb-0 fw-bold">Email:</p>
                            <a href="mailto:avnistudio@gmail.com" class="text-white text-decoration-none">avnistudio@gmail.com</a>
                        </div>
                    </div>

                    <div class="d-flex align-items-center">
                        <i class="fab fa-whatsapp fa-lg me-3"></i>
                        <div>
                            <p class="mb-0 fw-bold">WhatsApp:</p>
                            <a href="https://wa.me/919490334557" target="_blank" class="text-white text-decoration-none">+91 9490334557</a>
                        </div>
                    </div>

                    <!-- Placeholder map iframe -->
                    <iframe
                            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3824.2388373303657!2d80.6482618!3d16.5126839!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3a4a06d0b3074099%3A0x69666061327137f8!2sVijayawada%2C%20Andhra%20Pradesh%2C%20India!5e0!3m2!1sen!2sin!4v1626262626262!5m2!1sen!2sin"
                            width="100%"
                            height="180"
                            style="border:0; margin-top: 20px; border-radius: 8px;"
                            allowfullscreen=""
                            loading="lazy"></iframe>
                </div>
            </div>

        </div>
    </div>
</section>

<!-- FOOTER (Standardized structure) -->
<footer class="py-5" style="background-color:var(--dark); color:#fff;">
    <div class="container">
        <div class="row">
            <div class="col-md-4 mb-3"><h5>Anvi Studio</h5><p class="small">Handpicked ethnic wear for every occasion.</p></div>
            <div class="col-md-2 mb-3"><h6>Shop</h6><ul class="list-unstyled small"><li><a th:href="@{/products(category='Sarees')}" class="text-white">Sarees</a></li><li><a th:href="@{/products(category='Lehengas')}" class="text-white">Lehengas</a></li></ul></div>
            <div class="col-md-3 mb-3"><h6>Contact</h6><p class="small">Vijayawada, India<br><a href="mailto:avnistudio@gmail.com" class="text-white">avnistudio@gmail.com</a></p></div>
            <div class="col-md-3 mb-3"><h6>Follow</h6><p><a href="#" class="text-white me-2"><i class="fab fa-instagram"></i></a><a href="#" class="text-white"><i class="fab fa-facebook"></i></a></p></div>
        </div>
    </div>
</footer>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>